<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Department Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .login-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .portal-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .portal-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .student-btn {
            background: #4CAF50;
            color: white;
        }

        .teacher-btn {
            background: #2196F3;
            color: white;
        }

        .portal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .portal-btn.active {
            transform: scale(1.05);
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .login-btn:hover {
            background: #5a6fd8;
        }

        .dashboard {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logout-btn {
            padding: 10px 20px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .dashboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: #f5f5f5;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .profile-card {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .profile-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .detail-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .detail-label {
            font-weight: bold;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.1rem;
            color: #333;
        }

        .attendance-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .calendar-header {
            background: #667eea;
            color: white;
        }

        .present {
            background: #4CAF50;
            color: white;
        }

        .absent {
            background: #f44336;
            color: white;
        }

        .holiday {
            background: #FF9800;
            color: white;
        }

        .future {
            background: #f5f5f5;
            color: #999;
        }

        .fee-summary, .salary-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .fee-card, .salary-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .fee-card.total {
            border-top: 4px solid #2196F3;
        }

        .fee-card.paid {
            border-top: 4px solid #4CAF50;
        }

        .fee-card.pending {
            border-top: 4px solid #f44336;
        }

        .salary-card.total {
            border-top: 4px solid #2196F3;
        }

        .salary-card.received {
            border-top: 4px solid #4CAF50;
        }

        .salary-card.pending {
            border-top: 4px solid #FF9800;
        }

        .amount {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: #4CAF50;
            transition: width 0.3s ease;
        }

        .announcements {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .announcement-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .announcement-date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .timetable {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .timetable table {
            width: 100%;
            border-collapse: collapse;
        }

        .timetable th,
        .timetable td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        .timetable th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .timetable tr:hover {
            background: #f5f5f5;
        }

        @media (max-width: 768px) {
            .portal-buttons {
                flex-direction: column;
                align-items: center;
            }

            .dashboard-header {
                flex-direction: column;
                gap: 15px;
            }

            .dashboard-tabs {
                flex-wrap: wrap;
            }

            .profile-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Department Management System</h1>
            <p>Comprehensive Student & Teacher Portal</p>
        </div>

        <!-- Login Section -->
        <div id="loginSection" class="login-section">
            <div class="portal-buttons">
                <button class="portal-btn student-btn" onclick="selectPortal('student')">
                    üë®‚Äçüéì Student Portal
                </button>
                <button class="portal-btn teacher-btn" onclick="selectPortal('teacher')">
                    üë©‚Äçüè´ Teacher Portal
                </button>
            </div>

            <!-- Login Form -->
            <div id="loginForm">
                <form class="login-form" onsubmit="login(event)">
                    <div class="form-group">
                        <label for="userId">User ID:</label>
                        <input type="text" id="userId" required placeholder="Enter your ID">
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" required placeholder="Enter your password">
                    </div>
                    <button type="submit" class="login-btn">Login</button>
                </form>

                <div style="text-align: center; margin: 20px 0;">
                    <p>Don't have an account? <button onclick="showRegistration()" style="background: none; border: none; color: #667eea; cursor: pointer; text-decoration: underline; font-weight: bold;">Register Here</button></p>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; font-size: 0.9rem;">
                    <strong>Demo Credentials:</strong><br>
                    Student: ID: STU001, Password: student123<br>
                    Teacher: ID: TEA001, Password: teacher123
                </div>
            </div>

            <!-- Registration Form -->
            <div id="registrationForm" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 20px; color: #333;">Create New Account</h3>
                <form class="login-form" onsubmit="register(event)">
                    <div class="form-group">
                        <label for="regFullName">Full Name:</label>
                        <input type="text" id="regFullName" required placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="regEmail">Email:</label>
                        <input type="email" id="regEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="regPhone">Phone Number:</label>
                        <input type="tel" id="regPhone" required placeholder="Enter your phone number">
                    </div>
                    <div class="form-group">
                        <label for="regDepartment">Department:</label>
                        <select id="regDepartment" required>
                            <option value="">Select Department</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Mathematics">Mathematics</option>
                            <option value="Physics">Physics</option>
                            <option value="Chemistry">Chemistry</option>
                            <option value="Biology">Biology</option>
                            <option value="English">English</option>
                        </select>
                    </div>
                    
                    <!-- Student specific fields -->
                    <div id="studentFields" style="display: none;">
                        <div class="form-group">
                            <label for="regYear">Academic Year:</label>
                            <select id="regYear">
                                <option value="">Select Year</option>
                                <option value="1st Year">1st Year</option>
                                <option value="2nd Year">2nd Year</option>
                                <option value="3rd Year">3rd Year</option>
                                <option value="4th Year">4th Year</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Teacher specific fields -->
                    <div id="teacherFields" style="display: none;">
                        <div class="form-group">
                            <label for="regPosition">Position:</label>
                            <select id="regPosition">
                                <option value="">Select Position</option>
                                <option value="Assistant Professor">Assistant Professor</option>
                                <option value="Associate Professor">Associate Professor</option>
                                <option value="Professor">Professor</option>
                                <option value="Lecturer">Lecturer</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="regExperience">Experience (Years):</label>
                            <input type="number" id="regExperience" min="0" max="50" placeholder="Years of experience">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="regPassword">Password:</label>
                        <input type="password" id="regPassword" required placeholder="Create a password" minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword">Confirm Password:</label>
                        <input type="password" id="regConfirmPassword" required placeholder="Confirm your password">
                    </div>
                    
                    <button type="submit" class="login-btn">Register</button>
                </form>

                <div style="text-align: center; margin: 20px 0;">
                    <p>Already have an account? <button onclick="showLogin()" style="background: none; border: none; color: #667eea; cursor: pointer; text-decoration: underline; font-weight: bold;">Login Here</button></p>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="dashboard">
            <div class="dashboard-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">A</div>
                    <div>
                        <h2 id="userName">User Name</h2>
                        <p id="userRole">Role</p>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>

            <div class="dashboard-tabs">
                <button class="tab-btn active" onclick="showTab('profile')">üìã Profile</button>
                <button class="tab-btn" onclick="showTab('attendance')">üìÖ Attendance</button>
                <button class="tab-btn" onclick="showTab('financial')" id="financialTab">üí∞ Fees</button>
                <button class="tab-btn" onclick="showTab('timetable')">üïê Timetable</button>
                <button class="tab-btn" onclick="showTab('announcements')">üì¢ Announcements</button>
            </div>

            <!-- Profile Tab -->
            <div id="profileTab" class="tab-content active">
                <div class="profile-card">
                    <h3>Personal Information</h3>
                    <div class="profile-details" id="profileDetails">
                        <!-- Profile details will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Attendance Tab -->
            <div id="attendanceTab" class="tab-content">
                <h3>Attendance Overview</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div class="fee-card">
                        <h4>Total Days</h4>
                        <div class="amount" id="totalDays">120</div>
                    </div>
                    <div class="fee-card">
                        <h4>Present</h4>
                        <div class="amount" id="presentDays">108</div>
                    </div>
                    <div class="fee-card">
                        <h4>Absent</h4>
                        <div class="amount" id="absentDays">12</div>
                    </div>
                    <div class="fee-card">
                        <h4>Percentage</h4>
                        <div class="amount" id="attendancePercentage">90%</div>
                    </div>
                </div>
                
                <h4>Monthly Attendance Calendar</h4>
                <div class="attendance-calendar" id="attendanceCalendar">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
            </div>

            <!-- Financial Tab -->
            <div id="financialTab" class="tab-content">
                <div id="feeSection">
                    <h3>Fee Management</h3>
                    <div class="fee-summary">
                        <div class="fee-card total">
                            <h4>Total Fee</h4>
                            <div class="amount">NPR 500,000</div>
                        </div>
                        <div class="fee-card paid">
                            <h4>Paid Amount</h4>
                            <div class="amount">NPR 350,000</div>
                        </div>
                        <div class="fee-card pending">
                            <h4>Pending Amount</h4>
                            <div class="amount">NPR 150,000</div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 70%"></div>
                    </div>
                    <p style="text-align: center; margin-top: 10px;">70% Fee Paid</p>
                    
                    <div style="margin-top: 30px;">
                        <h4>Payment History</h4>
                        <div style="background: white; border-radius: 8px; padding: 15px; margin-top: 15px;">
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                                <span>Semester 1 Fee</span>
                                <span style="color: #4CAF50; font-weight: bold;">NPR 175,000 - Paid</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                                <span>Semester 2 Fee</span>
                                <span style="color: #4CAF50; font-weight: bold;">NPR 175,000 - Paid</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                                <span>Semester 3 Fee</span>
                                <span style="color: #f44336; font-weight: bold;">NPR 150,000 - Pending</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="salarySection">
                    <h3>Salary Management</h3>
                    <div class="salary-summary">
                        <div class="salary-card total">
                            <h4>Monthly Salary</h4>
                            <div class="amount">NPR 120,000</div>
                        </div>
                        <div class="salary-card received">
                            <h4>This Month Received</h4>
                            <div class="amount">NPR 120,000</div>
                        </div>
                        <div class="salary-card pending">
                            <h4>Bonus Pending</h4>
                            <div class="amount">NPR 25,000</div>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%"></div>
                    </div>
                    <p style="text-align: center; margin-top: 10px;">January 2024 Salary Received</p>
                    
                    <div style="margin-top: 30px;">
                        <h4>Salary History</h4>
                        <div style="background: white; border-radius: 8px; padding: 15px; margin-top: 15px;">
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                                <span>January 2024</span>
                                <span style="color: #4CAF50; font-weight: bold;">NPR 120,000 - Paid</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                                <span>December 2023</span>
                                <span style="color: #4CAF50; font-weight: bold;">NPR 120,000 - Paid</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;">
                                <span>November 2023</span>
                                <span style="color: #4CAF50; font-weight: bold;">NPR 120,000 - Paid</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                                <span>Performance Bonus</span>
                                <span style="color: #FF9800; font-weight: bold;">NPR 25,000 - Processing</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timetable Tab -->
            <div id="timetableTab" class="tab-content">
                <h3>Weekly Timetable</h3>
                <div class="timetable">
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Monday</th>
                                <th>Tuesday</th>
                                <th>Wednesday</th>
                                <th>Thursday</th>
                                <th>Friday</th>
                            </tr>
                        </thead>
                        <tbody id="timetableBody">
                            <!-- Timetable will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Announcements Tab -->
            <div id="announcementsTab" class="tab-content">
                <h3>Latest Announcements</h3>
                <div class="announcements" id="announcementsList">
                    <!-- Announcements will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPortal = 'student';
        let currentUser = null;

        // Sample data
        const users = {
            'STU001': {
                type: 'student',
                name: 'Alex Johnson',
                id: 'STU001',
                email: 'alex.johnson@university.edu',
                phone: '+1 234-567-8900',
                department: 'Computer Science',
                year: '3rd Year',
                gpa: '3.8',
                photo: 'üë®‚Äçüéì'
            },
            'TEA001': {
                type: 'teacher',
                name: 'Dr. Sarah Wilson',
                id: 'TEA001',
                email: 'sarah.wilson@university.edu',
                phone: '+1 234-567-8901',
                department: 'Computer Science',
                position: 'Associate Professor',
                experience: '8 Years',
                photo: 'üë©‚Äçüè´'
            }
        };

        const studentTimetable = [
            ['9:00-10:00', 'Mathematics', 'Physics', 'Chemistry', 'Biology', 'English'],
            ['10:00-11:00', 'Physics', 'Chemistry', 'Mathematics', 'English', 'Biology'],
            ['11:00-12:00', 'Chemistry', 'Biology', 'Physics', 'Mathematics', 'Computer'],
            ['12:00-1:00', 'Lunch Break', 'Lunch Break', 'Lunch Break', 'Lunch Break', 'Lunch Break'],
            ['1:00-2:00', 'Biology', 'English', 'Computer', 'Physics', 'Mathematics'],
            ['2:00-3:00', 'English', 'Computer', 'Biology', 'Chemistry', 'Physics']
        ];

        const teacherTimetable = [
            ['9:00-10:00', 'CS101 - Room A1', 'CS201 - Room B2', 'Free Period', 'CS301 - Room C3', 'Faculty Meeting'],
            ['10:00-11:00', 'CS102 - Room A2', 'Free Period', 'CS202 - Room B1', 'CS302 - Room C2', 'CS401 - Room D1'],
            ['11:00-12:00', 'Office Hours', 'CS203 - Room B3', 'CS103 - Room A3', 'Free Period', 'CS402 - Room D2'],
            ['12:00-1:00', 'Lunch Break', 'Lunch Break', 'Lunch Break', 'Lunch Break', 'Lunch Break'],
            ['1:00-2:00', 'CS104 - Room A4', 'Office Hours', 'CS204 - Room B4', 'CS303 - Room C1', 'Free Period'],
            ['2:00-3:00', 'Research', 'CS105 - Room A5', 'Research', 'CS304 - Room C4', 'CS403 - Room D3']
        ];

        const announcements = [
            {
                date: '2024-01-15',
                title: 'Mid-term Examinations',
                content: 'Mid-term examinations will be conducted from February 1st to February 15th. Please check your individual schedules.'
            },
            {
                date: '2024-01-12',
                title: 'Library Hours Extended',
                content: 'Library hours have been extended during exam period. Open 24/7 from January 20th to February 20th.'
            },
            {
                date: '2024-01-10',
                title: 'New Course Registration',
                content: 'Registration for summer courses is now open. Deadline: January 31st, 2024.'
            },
            {
                date: '2024-01-08',
                title: 'Campus WiFi Maintenance',
                content: 'Campus WiFi will undergo maintenance on January 18th from 2:00 AM to 6:00 AM.'
            }
        ];

        function selectPortal(portal) {
            currentPortal = portal;
            document.querySelectorAll('.portal-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.${portal}-btn`).classList.add('active');
            
            // Show/hide appropriate registration fields
            if (document.getElementById('registrationForm').style.display !== 'none') {
                updateRegistrationFields();
            }
        }

        function showRegistration() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registrationForm').style.display = 'block';
            updateRegistrationFields();
        }

        function showLogin() {
            document.getElementById('registrationForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        function updateRegistrationFields() {
            const studentFields = document.getElementById('studentFields');
            const teacherFields = document.getElementById('teacherFields');
            
            if (currentPortal === 'student') {
                studentFields.style.display = 'block';
                teacherFields.style.display = 'none';
                document.getElementById('regYear').required = true;
                document.getElementById('regPosition').required = false;
                document.getElementById('regExperience').required = false;
            } else {
                studentFields.style.display = 'none';
                teacherFields.style.display = 'block';
                document.getElementById('regYear').required = false;
                document.getElementById('regPosition').required = true;
                document.getElementById('regExperience').required = true;
            }
        }

        function generateUserId(type, name) {
            const prefix = type === 'student' ? 'STU' : 'TEA';
            const randomNum = Math.floor(Math.random() * 900) + 100; // 3 digit number
            return prefix + randomNum;
        }

        function register(event) {
            event.preventDefault();
            
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            const newUserId = generateUserId(currentPortal, document.getElementById('regFullName').value);
            
            // Create new user object
            const newUser = {
                type: currentPortal,
                name: document.getElementById('regFullName').value,
                id: newUserId,
                email: document.getElementById('regEmail').value,
                phone: document.getElementById('regPhone').value,
                department: document.getElementById('regDepartment').value,
                photo: currentPortal === 'student' ? 'üë®‚Äçüéì' : 'üë©‚Äçüè´'
            };
            
            if (currentPortal === 'student') {
                newUser.year = document.getElementById('regYear').value;
                newUser.gpa = '0.0'; // Default GPA for new students
            } else {
                newUser.position = document.getElementById('regPosition').value;
                newUser.experience = document.getElementById('regExperience').value + ' Years';
            }
            
            // Add to users object (in real app, this would be saved to database)
            users[newUserId] = newUser;
            
            // Show success message with generated ID
            alert(`Registration successful! Your User ID is: ${newUserId}\nPassword: ${password}\n\nPlease save these credentials for login.`);
            
            // Reset form and go back to login
            document.querySelector('#registrationForm form').reset();
            showLogin();
            
            // Pre-fill login form with new credentials
            document.getElementById('userId').value = newUserId;
        }

        function login(event) {
            event.preventDefault();
            const userId = document.getElementById('userId').value;
            const password = document.getElementById('password').value;

            // Check if user exists
            if (users[userId]) {
                // Check demo accounts or any registered user (in real app, passwords would be hashed and verified)
                const isValidLogin = 
                    (userId === 'STU001' && password === 'student123') || 
                    (userId === 'TEA001' && password === 'teacher123') ||
                    (users[userId] && password.length >= 6); // Simple validation for registered users
                
                if (isValidLogin) {
                    currentUser = users[userId];
                    
                    if (currentUser.type === currentPortal) {
                        showDashboard();
                    } else {
                        alert('Please select the correct portal for your account type.');
                    }
                } else {
                    alert('Invalid password. Please try again.');
                }
            } else {
                alert('User ID not found. Please check your credentials or register a new account.');
            }
        }

        function showDashboard() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            // Update user info
            document.getElementById('userAvatar').textContent = currentUser.photo;
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.type === 'student' ? 'Student' : 'Teacher';
            
            // Update financial tab label
            document.getElementById('financialTab').textContent = currentUser.type === 'student' ? 'üí∞ Fees' : 'üí∞ Salary';
            
            // Load profile data
            loadProfile();
            loadAttendance();
            loadFinancial();
            loadTimetable();
            loadAnnouncements();
        }

        function loadProfile() {
            const profileDetails = document.getElementById('profileDetails');
            let detailsHTML = '';
            
            if (currentUser.type === 'student') {
                detailsHTML = `
                    <div class="detail-item">
                        <div class="detail-label">Student ID</div>
                        <div class="detail-value">${currentUser.id}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value">${currentUser.name}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Email</div>
                        <div class="detail-value">${currentUser.email}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Phone</div>
                        <div class="detail-value">${currentUser.phone}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Department</div>
                        <div class="detail-value">${currentUser.department}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Academic Year</div>
                        <div class="detail-value">${currentUser.year}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Current GPA</div>
                        <div class="detail-value">${currentUser.gpa}</div>
                    </div>
                `;
            } else {
                detailsHTML = `
                    <div class="detail-item">
                        <div class="detail-label">Employee ID</div>
                        <div class="detail-value">${currentUser.id}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Full Name</div>
                        <div class="detail-value">${currentUser.name}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Email</div>
                        <div class="detail-value">${currentUser.email}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Phone</div>
                        <div class="detail-value">${currentUser.phone}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Department</div>
                        <div class="detail-value">${currentUser.department}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Position</div>
                        <div class="detail-value">${currentUser.position}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Experience</div>
                        <div class="detail-value">${currentUser.experience}</div>
                    </div>
                `;
            }
            
            profileDetails.innerHTML = detailsHTML;
        }

        function loadAttendance() {
            // Generate attendance calendar
            const calendar = document.getElementById('attendanceCalendar');
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            let calendarHTML = '';
            
            // Add headers
            days.forEach(day => {
                calendarHTML += `<div class="calendar-day calendar-header">${day}</div>`;
            });
            
            // Add sample month data (31 days)
            const attendanceData = [
                'present', 'present', 'absent', 'present', 'present', 'holiday', 'holiday',
                'present', 'present', 'present', 'absent', 'present', 'present', 'holiday',
                'present', 'absent', 'present', 'present', 'present', 'present', 'holiday',
                'present', 'present', 'present', 'present', 'absent', 'present', 'holiday',
                'present', 'present', 'future'
            ];
            
            attendanceData.forEach((status, index) => {
                const day = index + 1;
                calendarHTML += `<div class="calendar-day ${status}">${day}</div>`;
            });
            
            calendar.innerHTML = calendarHTML;
        }

        function loadFinancial() {
            if (currentUser.type === 'student') {
                document.getElementById('feeSection').style.display = 'block';
                document.getElementById('salarySection').style.display = 'none';
            } else {
                document.getElementById('feeSection').style.display = 'none';
                document.getElementById('salarySection').style.display = 'block';
            }
        }

        function loadTimetable() {
            const timetableBody = document.getElementById('timetableBody');
            const timetableData = currentUser.type === 'student' ? studentTimetable : teacherTimetable;
            
            let timetableHTML = '';
            timetableData.forEach(row => {
                timetableHTML += '<tr>';
                row.forEach(cell => {
                    timetableHTML += `<td>${cell}</td>`;
                });
                timetableHTML += '</tr>';
            });
            
            timetableBody.innerHTML = timetableHTML;
        }

        function loadAnnouncements() {
            const announcementsList = document.getElementById('announcementsList');
            let announcementsHTML = '';
            
            announcements.forEach(announcement => {
                announcementsHTML += `
                    <div class="announcement-item">
                        <div class="announcement-date">${new Date(announcement.date).toLocaleDateString()}</div>
                        <h4>${announcement.title}</h4>
                        <p>${announcement.content}</p>
                    </div>
                `;
            });
            
            announcementsList.innerHTML = announcementsHTML;
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        function logout() {
            currentUser = null;
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginSection').style.display = 'block';
            
            // Reset form
            document.getElementById('userId').value = '';
            document.getElementById('password').value = '';
            
            // Reset portal selection
            document.querySelectorAll('.portal-btn').forEach(btn => btn.classList.remove('active'));
            
            // Reset to profile tab
            showTab('profile');
        }

        // Initialize
        selectPortal('student');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97fa043af7de7674',t:'MTc1Nzk1OTE1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
